# Тестовое задание для авито

## Описание
`Сервис для бизнес-задач` — это веб-приложение для управления тендерами и предложениями с возможностью использования кворума для принятия решений. Проект реализован на языке Go и использует PostgreSQL в качестве базы данных. Основные возможности включают в себя:

- Создание, редактирование и откат тендеров и предложений.
- Управление доступом и проверка прав пользователей.
- Работа с разными статусами для тендеров и предложений.
- Ведение истории изменений тендеров и предложений.
- Согласование или отклонение предложений.
- Возможность оставить отзыв и посмотреть их на прошлые предложения.

Для простоты тестирования, в БД employee, organization, organization_responsible - загружены тестовые данные, с которыми вы можете ознакомиться в папке `./src/migrations/1_init.up.sql` или ниже на скрине.
![Снимок экрана 2024-09-16 в 19 24 21](https://github.com/user-attachments/assets/5194c399-92f0-496b-910f-dade9f866ef4)

## Технологии
- **Go**: язык программирования для разработки веб-приложения.
- **Gin**: веб-фреймворк для Go.
- **GORM**: ORM для работы с базой данных.
- **PostgreSQL**: реляционная база данных для хранения информации.
- **Docker**: для контейнеризации и управления зависимостями.
- **GitLab CI/CD**: для непрерывной интеграции и деплоя.

## Установка и запуск
### Предварительные требования
- Docker и Docker Compose
- Postman
  
### Запуск с использованием Docker Compose
1. Клонируйте репозиторий проекта:
   ```bash
   https: https://github.com/lahnasti/service-for-business.git
   cd zadanie-6105
2. Применение конфигурации линтера: `golangci-lint run -c .golangci.yml `
3. Запустите сервисы с помощью Docker Compose:
`docker-compose up --build`
4. Использование
API Эндпоинты
- Вывести все опубликованные тендеры: `GET /api/tenders`
- Вывести все тендеры, созданные юзером: `GET /api/tenders/my?username=user1`
- Создание тендера: `POST /api/tenders/new`
- Редактирование тендера: `PATCH /api/tenders/{id}/edit`
- Откат тендера к версии: `PUT /api/tenders//{tenderID}/rollback/{version}`
- Редактирование статуса тендера: `PATCH /api/tenders/status/{id}`
- Вывести все предложения для тендера: `GET /api/bids/{tenderID}/list`
- Вывести все предложения, созданные юзером: `GET /api/bids/my?username=user1`
- Создание предложения: `POST /api/bids/new`
- Редактирование предложения: `PATCH /api/bids/{id}/edit`
- Редактирование статуса предложения: `PATCH /api/bids/status/{id}`
- Откат предложения к версии: `PUT /api/bids/{bidID}/rollback/{version}`
- Подтверждение/отклонение предложения: `PATCH /api/bids/{id}/submit_decision` и `PATCH /api/bids/{id}/decline_decision`
- Оставить отзыв на предложение: `POST /api/bids/feedback`
- Посмотреть отзывы на прошлые предложения: `POST /api/bids/{tenderID}/reviews?username=user2&organizationId=1`

### Структура проекта
- src/cmd/: точка входа приложения.
- src/migrations: файлы миграций базы данных.
- src/mocks/: сгенерированные моки для тестов.
- src/internal/ : вся бизнес-логика.
- /config/: конфигурационные файлы и обработка переменных окружения.
- /models/: описания моделей данных.
- /repository/: взаимодействие с базой данных (CRUD-операции).
- /logger/: логгер для дебага.
- /server/routes/: маршруты.
- /server/: обработчики HTTP-запросов.
